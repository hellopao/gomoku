!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("gomoku",[],t):"object"==typeof exports?exports.gomoku=t():e.gomoku=t()}(this,function(){return function(e){function t(s){if(n[s])return n[s].exports;var r=n[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o),c=n(3),h=r(c),f=n(4),l=(r(f),n(2)),v=s(l),y=v.ChessBoxWidth,p=v.ChessBoxCount,d=v.ChessStatus,x=v.ChessManTypes,g=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{aiMode:!0}:arguments[1];i(this,e),this.el=t,this._initChessInfo(n),this._render()}return a(e,[{key:"_initChessInfo",value:function(e){this.chessTurn=x.WHITE.value,this.chessPlayers=[],this.chessStatus=d.LOCKED,this.chessmanMap=new Map}},{key:"_render",value:function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=(p+2)*y,this.canvas.style.cursor="pointer",this.el.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this._createChessBoard(),this._bindEvents()}},{key:"_createChessBoard",value:function(){this.chessBoard=new u["default"](this.ctx),this.chessBoard.draw()}},{key:"_resetChessBoard",value:function(){this.chessBoard.clear()}},{key:"_bindEvents",value:function(){var e=this;this.canvas.addEventListener("click",function(t){if(e.chessStatus!==d.LOCKED&&e.chessStatus!==d.FINISH){var n=e._getEventCoord(t.clientX,t.clientY);if(!(n.x<0||n.x>y*p||n.y<0||n.y>y*p)){var s=e._getChessmanCoord(n.x,n.y),r=s.x,i=s.y;e.chessmanMap.has(r+","+i)||e._putChessMan(r,i)}}},!1)}},{key:"_putChessMan",value:function(e,t){var n=this.chessTurn?x.WHITE:x.BLACK,s=new h["default"](this.ctx,n);s.put(e,t),this.chessmanMap.set(e+","+t,s.type);var r=this._checkVitory(e,t,s.type);r?(this.chessStatus=d.FINISH,alert(n.name+" win!!! game over!!")):this._switchTurn()}},{key:"_getEventCoord",value:function(e,t){return{x:e-this.canvas.offsetTop-y,y:t-this.canvas.offsetLeft-y}}},{key:"_getChessmanCoord",value:function(e,t){return{x:Math.round(e/y)*y+y,y:Math.round(t/y)*y+y}}},{key:"_checkVitory",value:function(e,t,n){for(var s={horizontal:{x:{positive:y,negtive:-1*y},y:{positive:0,negtive:0}},vertical:{x:{positive:0,negtive:0},y:{positive:y,negtive:-1*y}},leftDiagonal:{x:{positive:-1*y,negtive:y},y:{positive:y,negtive:-1*y}},rightDiagonal:{x:{positive:y,negtive:-1*y},y:{positive:y,negtive:-1*y}}},r=Object.keys(s),i=0;i<r.length;i++){for(var a=r[i],o=s[a],u=1,c=0;4>c;c++){var h={x:e+o.x.positive*(c+1),y:t+o.y.positive*(c+1)};if(h.x>y*p||h.y>y*p)break;if(this.chessmanMap.has(h.x+","+h.y)){var f=this.chessmanMap.get(h.x+","+h.y);if(f!==n)break;u++}}if(5===u)return!0;for(var l=0;4>l;l++){var h={x:e+o.x.negtive*(l+1),y:t+o.y.negtive*(l+1)};if(h.x<0||h.y<0)break;if(this.chessmanMap.has(h.x+","+h.y)){var f=this.chessmanMap.get(h.x+","+h.y);if(f!==n)break;u++}}if(5===u)return!0}return!1}},{key:"_switchTurn",value:function(){this.chessTurn=1^this.chessTurn}},{key:"addPlayer",value:function(e){this.chessPlayers.push(e),2===this.chessPlayers.length}},{key:"start",value:function(){this.chessStatus=d.PLAYING}},{key:"restart",value:function(){this.chessStatus=d.PLAYING,this._resetChessBoard()}}]),e}();t["default"]=g},function(e,t,n){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=s(a),u=o.ChessBoxWidth,c=o.ChessBoxCount,h=function(){function e(t){r(this,e),this.ctx=t}return i(e,[{key:"draw",value:function(e,t){this.ctx.strokeRect(e,t,u,u)}}]),e}(),f=function(){function e(t){r(this,e),this.ctx=t}return i(e,[{key:"draw",value:function(){for(var e=0;c>e;e++)for(var t=0;c>t;t++){var n=new h(this.ctx);n.draw((e+1)*u,(t+1)*u)}}},{key:"clear",value:function(){this.ctx.clearRect(u,u,c*u,c*u),this.draw()}}]),e}();t["default"]=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.ChessBoxCount=14,t.ChessBoxWidth=40);t.ChessManRadius=n/2,t.ChessStatus={LOCKED:0,PLAYING:1,FINISHED:2},t.ChessManTypes={WHITE:{name:"白棋",value:0,color:"rgb(255,255,255)"},BLACK:{name:"黑棋",value:1,color:"rgb(0,0,0)"}},t.ChessMode={AI:0,BATTLE:1}},function(e,t,n){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=s(a),u=function(){function e(t,n){r(this,e),this.ctx=t,this.type=n}return i(e,[{key:"put",value:function(e,t){this.ctx.beginPath(),this.ctx.arc(e,t,o.ChessManRadius,0,2*Math.PI,!0),this.ctx.strokeStyle="rgb(0,0,0)",this.ctx.stroke(),this.ctx.closePath(),this.ctx.fillStyle=this.type.color,this.ctx.fill()}}]),e}();t["default"]=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();(function(){function e(){n(this,e)}return s(e,[{key:"quit",value:function(){}},{key:"regret",value:function(){}}]),e})()}])});